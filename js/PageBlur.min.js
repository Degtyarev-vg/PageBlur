function integralBlurCanvasRGB(e,t,n,r,a,i,o){var l=integralImageFromCanvasRGB(e,0,0,r,a);if(null!=l){var s=l.imageData,c=s.pixels,d=l.context;for(blurIntegralImageRGB(l,i);--o>0;)l=calculateIntegralImageRGB(c,r,a),l.imageData=s,l.context=d,blurIntegralImageRGB(l,i);d.putImageData(s,t,n)}}function updateCanvas(e){e.context.putImageData(e.imageData,0,0)}function blurIntegralImageRGB(e,t){for(var n,r,a,i,o,l,s,c,d,u,f=e,h=f.width,g=f.height,m=f.pixels,p=0,y=0,b=f.r,v=f.g,x=f.b,w=h+1,C=0;g>C;C++){a=t>C?-C:-t,i=C>=g-t?g-C-1:t,o=i-a,a*=w,i*=w;for(var k=0;h>k;k++)n=t>k?-k:-t,r=k>=h-t?h-k-1:t,u=1/((r-n)*o),n+=p,r+=p,l=n+a,s=r+i,c=n+i,d=r+a,m[y++]=(b[l]+b[s]-b[c]-b[d])*u|0,m[y++]=(v[l]+v[s]-v[c]-v[d])*u|0,m[y++]=(x[l]+x[s]-x[c]-x[d])*u|0,y++,p++;p++}}function integralImageFromCanvasRGB(e,t,n,r,a){var i=getCanvasPixels(e,t,n,r,a);if(null!=i){var o=calculateIntegralImageRGB(i.pixels,r,a);return o.context=i.context,o.imageData=i.imageData,o}}function getCanvasPixels(e,t,n,r,a){var i={id:e,top_x:t,top_y:n,width:r,height:a};i.canvas=document.getElementById(e),i.context=i.canvas.getContext("2d");try{i.imageData=i.context.getImageData(t,n,r,a)}catch(o){return null}return i.pixels=i.imageData.data,i}function calculateIntegralImageRGB(e,t,n){var r=[],a=[],i=[],o=0,l=0;for(y=0;n>y;y++){for(rsum=e[o++],gsum=e[o++],bsum=e[o++],o++,x=0;t>x;x++)r[l]=rsum,a[l]=gsum,i[l++]=bsum,rsum+=e[o++],gsum+=e[o++],bsum+=e[o++],o++;r[l]=rsum,a[l]=gsum,i[l++]=bsum,o-=4}for(var s=t+1,c=s,d=s*(n+1),u=s-c;d>s;)r[s]+=r[u],a[s]+=a[u],i[s]+=i[u],s++,u++;return{r:r,g:a,b:i,width:t,height:n,pixels:e}}function stackBlurCanvasRGB(e,t,n,r,a,i){if(!(isNaN(i)||1>i)){i|=0;var s,o=document.getElementById(e),l=o.getContext("2d");try{try{s=l.getImageData(t,n,r,a)}catch(c){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),s=l.getImageData(t,n,r,a)}catch(c){throw alert("Cannot access local image"),new Error("unable to access local image data: "+c)}}}catch(c){throw alert("Cannot access image"),new Error("unable to access image data: "+c)}var u,f,h,g,m,p,y,b,v,x,w,C,k,I,E,T,B,R,S,M,d=s.data,L=i+i+1,N=r-1,z=a-1,A=i+1,U=A*(A+1)/2,P=new BlurStack,F=P;for(h=1;L>h;h++)if(F=F.next=new BlurStack,h==A)var D=F;F.next=P;var G=null,V=null;y=p=0;var H=mul_table[i],W=shg_table[i];for(f=0;a>f;f++){for(I=E=T=b=v=x=0,w=A*(B=d[p]),C=A*(R=d[p+1]),k=A*(S=d[p+2]),b+=U*B,v+=U*R,x+=U*S,F=P,h=0;A>h;h++)F.r=B,F.g=R,F.b=S,F=F.next;for(h=1;A>h;h++)g=p+((h>N?N:h)<<2),b+=(F.r=B=d[g])*(M=A-h),v+=(F.g=R=d[g+1])*M,x+=(F.b=S=d[g+2])*M,I+=B,E+=R,T+=S,F=F.next;for(G=P,V=D,u=0;r>u;u++)d[p]=b*H>>W,d[p+1]=v*H>>W,d[p+2]=x*H>>W,b-=w,v-=C,x-=k,w-=G.r,C-=G.g,k-=G.b,g=y+((g=u+i+1)<N?g:N)<<2,I+=G.r=d[g],E+=G.g=d[g+1],T+=G.b=d[g+2],b+=I,v+=E,x+=T,G=G.next,w+=B=V.r,C+=R=V.g,k+=S=V.b,I-=B,E-=R,T-=S,V=V.next,p+=4;y+=r}for(u=0;r>u;u++){for(E=T=I=v=x=b=0,p=u<<2,w=A*(B=d[p]),C=A*(R=d[p+1]),k=A*(S=d[p+2]),b+=U*B,v+=U*R,x+=U*S,F=P,h=0;A>h;h++)F.r=B,F.g=R,F.b=S,F=F.next;for(m=r,h=1;i>=h;h++)p=m+u<<2,b+=(F.r=B=d[p])*(M=A-h),v+=(F.g=R=d[p+1])*M,x+=(F.b=S=d[p+2])*M,I+=B,E+=R,T+=S,F=F.next,z>h&&(m+=r);for(p=u,G=P,V=D,f=0;a>f;f++)g=p<<2,d[g]=b*H>>W,d[g+1]=v*H>>W,d[g+2]=x*H>>W,b-=w,v-=C,x-=k,w-=G.r,C-=G.g,k-=G.b,g=u+((g=f+A)<z?g:z)*r<<2,b+=I+=G.r=d[g],v+=E+=G.g=d[g+1],x+=T+=G.b=d[g+2],G=G.next,w+=B=V.r,C+=R=V.g,k+=S=V.b,I-=B,E-=R,T-=S,V=V.next,p+=r}l.putImageData(s,t,n)}}function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function PageBlur(e){function u(){var e,r,i,o,l,n=window.pageYOffset||document.documentElement.scrollTop;for(d=c-1;d>-1;d--){e=document.getElementById(a+d),i=s[d];var u=getComputedStyle(i,"").bottom;r=i.offsetTop,l=-i.offsetLeft-t.offsetLeft,o="auto"!=u?e.offsetHeight-document.body.clientHeight-n+parseInt(u,10):-r-n,e.style.webkitTransform="translate("+l+"px,"+o+"px)",e.style.mozTransform="translate("+l+"px,"+o+"px)",e.style.msTransform="translate("+l+"px,"+o+"px)",e.style.oTransform="translate("+l+"px,"+o+"px)",e.style.transform="translate("+l+"px,"+o+"px)"}}var t=document.getElementById(e.targetScreenId),n=e.blurRadius,r=e.blurBgWrap,a=e.blurBgImage,i=e.positionCorrect,o=e.fastBlur,l=e.clean;getElementsByClass=document.getElementsByClassName?function(e,t){return(t||document).getElementsByClassName(e)}:function(e,t){var l,s,t=t||document,n=t.getElementsByTagName("*"),r=n.length,a=e.split(/\s+/),i=a.length,o=[];for(l=0;r>l;l++)for(s=0;i>s;s++)if(-1!=n[l].className.search("\\b"+a[s]+"\\b")){o.push(n[l]);break}return o};var s=getElementsByClass(r),c=s.length,d=c-1;html2canvas(t,{logging:!0,onrendered:function(e){var i=document.body.appendChild(e);i.id="temporaryCanvas";var c=t.offsetHeight,u=t.offsetWidth;o?integralBlurCanvasRGB(i.id,0,0,u,c,n,1):stackBlurCanvasRGB(i.id,0,0,u,c,n);for(var h,g,f=document.getElementById(i.id);d>-1;d--)h=document.createElement("canvas"),h.id=a+d,l&&document.getElementById(h.id).parentNode.removeChild(document.getElementById(h.id)),h.className=a,h.style.position="absolute",h.style.left="0px","auto"!=getComputedStyle(s[d],"").bottom?h.style.bottom="0px":h.style.top="0px",g=h.getContext("2d"),h.width=f.width,h.height=f.height,g.drawImage(f,0,0),s[d].id=r+d,s[d].appendChild(h);l&&document.body.removeChild(document.getElementById(i.id))}}),i&&setTimeout(function(){u()},100),window.onscroll=function(){u()}}var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];!function(e,t,n){"use strict";function l(e,t,n){var a,r=e.runtimeStyle&&e.runtimeStyle[t],i=e.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)&&(a=i.left,r&&(e.runtimeStyle.left=e.currentStyle.left),i.left="fontSize"===t?"1em":n||0,n=i.pixelLeft+"px",i.left=a,r&&(e.runtimeStyle.left=r)),/^(thin|medium|thick)$/i.test(n)?n:Math.round(parseFloat(n))+"px"}function s(e){return parseInt(e,10)}function c(e,t,a,i){if(e=(e||"").split(","),e=e[i||0]||e[0]||"auto",e=r.Util.trimText(e).split(" "),"backgroundSize"!==a||e[0]&&!e[0].match(/cover|contain|auto/)){if(e[0]=-1===e[0].indexOf("%")?l(t,a+"X",e[0]):e[0],e[1]===n){if("backgroundSize"===a)return e[1]="auto",e;e[1]=e[0]}e[1]=-1===e[1].indexOf("%")?l(t,a+"Y",e[1]):e[1]}else;return e}function d(e,t,n,a,i,o){var s,c,d,u,l=r.Util.getCSS(t,e,i);if(1===l.length&&(u=l[0],l=[],l[0]=u,l[1]=u),-1!==l[0].toString().indexOf("%"))d=parseFloat(l[0])/100,c=n.width*d,"backgroundSize"!==e&&(c-=(o||a).width*d);else if("backgroundSize"===e)if("auto"===l[0])c=a.width;else if(/contain|cover/.test(l[0])){var f=r.Util.resizeBounds(a.width,a.height,n.width,n.height,l[0]);c=f.width,s=f.height}else c=parseInt(l[0],10);else c=parseInt(l[0],10);return"auto"===l[1]?s=c/a.width*a.height:-1!==l[1].toString().indexOf("%")?(d=parseFloat(l[1])/100,s=n.height*d,"backgroundSize"!==e&&(s-=(o||a).height*d)):s=parseInt(l[1],10),[c,s]}function u(e,t){var n=[];return{storage:n,width:e,height:t,clip:function(){n.push({type:"function",name:"clip",arguments:arguments})},translate:function(){n.push({type:"function",name:"translate",arguments:arguments})},fill:function(){n.push({type:"function",name:"fill",arguments:arguments})},save:function(){n.push({type:"function",name:"save",arguments:arguments})},restore:function(){n.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){n.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var e=[];return n.push({type:"function",name:"drawShape",arguments:e}),{moveTo:function(){e.push({name:"moveTo",arguments:arguments})},lineTo:function(){e.push({name:"lineTo",arguments:arguments})},arcTo:function(){e.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){e.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){e.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(e,t){return n.push({type:"variable",name:e,arguments:t}),t}}}function f(e){return{zindex:e,children:[]}}var a,i,r={};r.Util={},r.Util.log=function(t){r.logging&&e.console&&e.console.log&&e.console.log(t)},r.Util.trimText=function(e){return function(t){return e?e.apply(t):((t||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),r.Util.asFloat=function(e){return parseFloat(e)},function(){var e=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,t=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;r.Util.parseTextShadows=function(n){if(!n||"none"===n)return[];for(var r=n.match(e),a=[],i=0;r&&i<r.length;i++){var o=r[i].match(t);a.push({color:o[0],offsetX:o[1]?o[1].replace("px",""):0,offsetY:o[2]?o[2].replace("px",""):0,blur:o[3]?o[3].replace("px",""):0})}return a}}(),r.Util.parseBackgroundImage=function(e){var n,r,a,i,o,s,u,f,t=" \r\n	",l=[],c=0,d=0,h=function(){n&&('"'===r.substr(0,1)&&(r=r.substr(1,r.length-2)),r&&f.push(r),"-"===n.substr(0,1)&&(i=n.indexOf("-",1)+1)>0&&(a=n.substr(0,i),n=n.substr(i)),l.push({prefix:a,method:n.toLowerCase(),value:o,args:f})),f=[],n=a=r=o=""};h();for(var g=0,m=e.length;m>g;g++)if(s=e[g],!(0===c&&t.indexOf(s)>-1)){switch(s){case'"':u?u===s&&(u=null):u=s;break;case"(":if(u)break;if(0===c){c=1,o+=s;continue}d++;break;case")":if(u)break;if(1===c){if(0===d){c=0,o+=s,h();continue}d--}break;case",":if(u)break;if(0===c){h();continue}if(1===c&&0===d&&!n.match(/^url$/i)){f.push(r),r="",o+=s;continue}}o+=s,0===c?n+=s:r+=s}return h(),l},r.Util.Bounds=function(e){var t,n={};return e.getBoundingClientRect&&(t=e.getBoundingClientRect(),n.top=t.top,n.bottom=t.bottom||t.top+t.height,n.left=t.left,n.width=e.offsetWidth,n.height=e.offsetHeight),n},r.Util.OffsetBounds=function(e){var t=e.offsetParent?r.Util.OffsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+t.top,bottom:e.offsetTop+e.offsetHeight+t.top,left:e.offsetLeft+t.left,width:e.offsetWidth,height:e.offsetHeight}},r.Util.getCSS=function(e,n,r){a!==e&&(i=t.defaultView.getComputedStyle(e,null));var o=i[n];if(/^background(Size|Position)$/.test(n))return c(o,e,n,r);if(/border(Top|Bottom)(Left|Right)Radius/.test(n)){var l=o.split(" ");return l.length<=1&&(l[1]=l[0]),l.map(s)}return o},r.Util.resizeBounds=function(e,t,n,r,a){var l,s,i=n/r,o=e/t;return a&&"auto"!==a?o>i^"contain"===a?(s=r,l=r*o):(l=n,s=n/o):(l=n,s=r),{width:l,height:s}},r.Util.BackgroundPosition=function(e,t,n,r,a){var i=d("backgroundPosition",e,t,n,r,a);return{left:i[0],top:i[1]}},r.Util.BackgroundSize=function(e,t,n,r){var a=d("backgroundSize",e,t,n,r);return{width:a[0],height:a[1]}},r.Util.Extend=function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},r.Util.Children=function(e){var t;try{t=e.nodeName&&"IFRAME"===e.nodeName.toUpperCase()?e.contentDocument||e.contentWindow.document:function(e){var t=[];return null!==e&&!function(e,t){var r=e.length,a=0;if("number"==typeof t.length)for(var i=t.length;i>a;a++)e[r++]=t[a];else for(;t[a]!==n;)e[r++]=t[a++];return e.length=r,e}(t,e),t}(e.childNodes)}catch(a){r.Util.log("html2canvas.Util.Children failed with exception: "+a.message),t=[]}return t},r.Util.isTransparent=function(e){return"transparent"===e||"rgba(0, 0, 0, 0)"===e},r.Util.Font=function(){var e={};return function(t,r,a){if(e[t+"-"+r]!==n)return e[t+"-"+r];var c,d,u,i=a.createElement("div"),o=a.createElement("img"),l=a.createElement("span"),s="Hidden Text";return i.style.visibility="hidden",i.style.fontFamily=t,i.style.fontSize=r,i.style.margin=0,i.style.padding=0,a.body.appendChild(i),o.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",o.width=1,o.height=1,o.style.margin=0,o.style.padding=0,o.style.verticalAlign="baseline",l.style.fontFamily=t,l.style.fontSize=r,l.style.margin=0,l.style.padding=0,l.appendChild(a.createTextNode(s)),i.appendChild(l),i.appendChild(o),c=o.offsetTop-l.offsetTop+1,i.removeChild(l),i.appendChild(a.createTextNode(s)),i.style.lineHeight="normal",o.style.verticalAlign="super",d=o.offsetTop-i.offsetTop+1,u={baseline:c,lineWidth:1,middle:d},e[t+"-"+r]=u,a.body.removeChild(i),u}}(),function(){function i(t){return function(n){try{t.addColorStop(n.stop,n.color)}catch(r){e.log(["failed to add color stop: ",r,"; tried to add: ",n])}}}var e=r.Util,n={};r.Generate=n;var a=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];n.parseGradient=function(e,t){var n,r,o,l,s,c,d,u,f,h,g,m,i=a.length;for(r=0;i>r&&!(o=e.match(a[r]));r+=1);if(o)switch(o[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(n={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},s=o[2].match(/\w+/g))for(c=s.length,r=0;c>r;r+=1)switch(s[r]){case"top":n.y0=0,n.y1=t.height;break;case"right":n.x0=t.width,n.x1=0;break;case"bottom":n.y0=t.height,n.y1=0;break;case"left":n.x0=0,n.x1=t.width}if(null===n.x0&&null===n.x1&&(n.x0=n.x1=t.width/2),null===n.y0&&null===n.y1&&(n.y0=n.y1=t.height/2),s=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(c=s.length,d=1/Math.max(c-1,1),r=0;c>r;r+=1)u=s[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),u[2]?(l=parseFloat(u[2]),l/="%"===u[3]?100:t.width):l=r*d,n.colorStops.push({color:u[1],stop:l});break;case"-webkit-gradient":if(n={type:"radial"===o[2]?"circle":o[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},s=o[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),s&&(n.x0=s[1]*t.width/100,n.y0=s[2]*t.height/100,n.x1=s[3]*t.width/100,n.y1=s[4]*t.height/100),s=o[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(c=s.length,r=0;c>r;r+=1)u=s[r].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),l=parseFloat(u[2]),"from"===u[1]&&(l=0),"to"===u[1]&&(l=1),n.colorStops.push({color:u[3],stop:l});break;case"-moz-linear-gradient":if(n={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},s=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),s&&(n.x0=s[1]*t.width/100,n.y0=s[2]*t.height/100,n.x1=t.width-n.x0,n.y1=t.height-n.y0),s=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(c=s.length,d=1/Math.max(c-1,1),r=0;c>r;r+=1)u=s[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),u[2]?(l=parseFloat(u[2]),u[3]&&(l/=100)):l=r*d,n.colorStops.push({color:u[1],stop:l});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(n={type:"circle",x0:0,y0:0,x1:t.width,y1:t.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},s=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),s&&(n.cx=s[1]*t.width/100,n.cy=s[2]*t.height/100),s=o[3].match(/\w+/),u=o[4].match(/[a-z\-]*/),s&&u)switch(u[0]){case"farthest-corner":case"cover":case"":f=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),g=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),m=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.max(f,h,g,m);break;case"closest-corner":f=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),g=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),m=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.min(f,h,g,m);break;case"farthest-side":"circle"===s[0]?n.rx=n.ry=Math.max(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=s[0],n.rx=Math.max(n.cx,n.x1-n.cx),n.ry=Math.max(n.cy,n.y1-n.cy));break;case"closest-side":case"contain":"circle"===s[0]?n.rx=n.ry=Math.min(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=s[0],n.rx=Math.min(n.cx,n.x1-n.cx),n.ry=Math.min(n.cy,n.y1-n.cy))}if(s=o[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(c=s.length,d=1/Math.max(c-1,1),r=0;c>r;r+=1)u=s[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),u[2]?(l=parseFloat(u[2]),l/="%"===u[3]?100:t.width):l=r*d,n.colorStops.push({color:u[1],stop:l})}return n},n.Gradient=function(e,n){if(0!==n.width&&0!==n.height){var l,s,a=t.createElement("canvas"),o=a.getContext("2d");if(a.width=n.width,a.height=n.height,l=r.Generate.parseGradient(e,n))switch(l.type){case"linear":s=o.createLinearGradient(l.x0,l.y0,l.x1,l.y1),l.colorStops.forEach(i(s)),o.fillStyle=s,o.fillRect(0,0,n.width,n.height);break;case"circle":s=o.createRadialGradient(l.cx,l.cy,0,l.cx,l.cy,l.rx),l.colorStops.forEach(i(s)),o.fillStyle=s,o.fillRect(0,0,n.width,n.height);break;case"ellipse":var c=t.createElement("canvas"),d=c.getContext("2d"),u=Math.max(l.rx,l.ry),f=2*u;c.width=c.height=f,s=d.createRadialGradient(l.rx,l.ry,0,l.rx,l.ry,u),l.colorStops.forEach(i(s)),d.fillStyle=s,d.fillRect(0,0,f,f),o.fillStyle=l.colorStops[l.colorStops.length-1].color,o.fillRect(0,0,a.width,a.height),o.drawImage(c,l.cx-l.rx,l.cy-l.ry,2*l.rx,2*l.ry)}return a}},n.ListAlpha=function(e){var n,t="";do n=e%26,t=String.fromCharCode(n+64)+t,e/=26;while(26*e>26);return t},n.ListRoman=function(e){var a,t=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],n=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],r="",i=t.length;if(0>=e||e>=4e3)return e;for(a=0;i>a;a+=1)for(;e>=n[a];)e-=n[a],r+=t[a];return r}}(),r.Parse=function(a,i){function b(){return Math.max(Math.max(s.body.scrollWidth,s.documentElement.scrollWidth),Math.max(s.body.offsetWidth,s.documentElement.offsetWidth),Math.max(s.body.clientWidth,s.documentElement.clientWidth))}function v(){return Math.max(Math.max(s.body.scrollHeight,s.documentElement.scrollHeight),Math.max(s.body.offsetHeight,s.documentElement.offsetHeight),Math.max(s.body.clientHeight,s.documentElement.clientHeight))}function x(e,t){var n=parseInt(m(e,t),10);return isNaN(n)?0:n}function w(e,t,n,r,a,i){"transparent"!==i&&(e.setVariable("fillStyle",i),e.fillRect(t,n,r,a),l+=1)}function C(e,t,n){return e.length>0?t+n.toUpperCase():void 0}function k(e,t){switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,C);case"uppercase":return e.toUpperCase();default:return e}}function I(e){return/^(normal|none|0px)$/.test(e)}function E(e,t,n,r){null!==e&&c.trimText(e).length>0&&(r.fillText(e,t,n),l+=1)}function T(e,t,n,r){var a=!1,i=m(t,"fontWeight"),o=m(t,"fontFamily"),l=m(t,"fontSize"),d=c.parseTextShadows(m(t,"textShadow"));switch(parseInt(i,10)){case 401:i="bold";break;case 400:i="normal"}return e.setVariable("fillStyle",r),e.setVariable("font",[m(t,"fontStyle"),m(t,"fontVariant"),i,l,o].join(" ")),e.setVariable("textAlign",a?"right":"left"),d.length&&(e.setVariable("shadowColor",d[0].color),e.setVariable("shadowOffsetX",d[0].offsetX),e.setVariable("shadowOffsetY",d[0].offsetY),e.setVariable("shadowBlur",d[0].blur)),"none"!==n?c.Font(o,l,s):void 0}function B(e,t,n,r,a){switch(t){case"underline":w(e,n.left,Math.round(n.top+r.baseline+r.lineWidth),n.width,1,a);break;case"overline":w(e,n.left,Math.round(n.top),n.width,1,a);break;case"line-through":w(e,n.left,Math.ceil(n.top+r.middle+r.lineWidth),n.width,1,a)}}function R(e,t,n,r,a){var i;if(d.rangeBounds&&!a)("none"!==n||0!==c.trimText(t).length)&&(i=S(t,e.node,e.textOffset)),e.textOffset+=t.length;else if(e.node&&"string"==typeof e.node.nodeValue){var o=r?e.node.splitText(t.length):null;i=M(e.node,a),e.node=o}return i}function S(e,t,n){var r=s.createRange();return r.setStart(t,n),r.setEnd(t,n+e.length),r.getBoundingClientRect()}function M(e,t){var n=e.parentNode,r=s.createElement("wrapper"),a=e.cloneNode(!0);r.appendChild(e.cloneNode(!0)),n.replaceChild(r,e);var i=t?c.OffsetBounds(r):c.Bounds(r);return n.replaceChild(a,r),i}function L(e,t,n){var s,d,r=n.ctx,a=m(e,"color"),o=m(e,"textDecoration"),l=m(e,"textAlign"),u={node:t,textOffset:0};c.trimText(t.nodeValue).length>0&&(t.nodeValue=k(t.nodeValue,m(e,"textTransform")),l=l.replace(["-webkit-auto"],["auto"]),d=t.nodeValue.split(!i.letterRendering&&/^(left|right|justify|auto)$/.test(l)&&I(m(e,"letterSpacing"))?/(\b| )/:""),s=T(r,e,o,a),i.chinese&&d.forEach(function(e,t){/.*[\u4E00-\u9FA5].*$/.test(e)&&(e=e.split(""),e.unshift(t,1),d.splice.apply(d,e))}),d.forEach(function(e,t){var i=R(u,e,o,t<d.length-1,n.transform.matrix);i&&(E(e,i.left,i.bottom,r),B(r,o,i,s,a))}))}function O(e,t){var r,a,n=s.createElement("boundelement");return n.style.display="inline",r=e.style.listStyleType,e.style.listStyleType="none",n.appendChild(s.createTextNode(t)),e.insertBefore(n,e.firstChild),a=c.Bounds(n),e.removeChild(n),e.style.listStyleType=r,a}function N(e){var t=-1,n=1,r=e.parentNode.childNodes;if(e.parentNode){for(;r[++t]!==e;)1===r[t].nodeType&&n++;return n}return-1}function z(e,t){var a,n=N(e);switch(t){case"decimal":a=n;break;case"decimal-leading-zero":a=1===n.toString().length?n="0"+n.toString():n.toString();break;case"upper-roman":a=r.Generate.ListRoman(n);break;case"lower-roman":a=r.Generate.ListRoman(n).toLowerCase();break;case"lower-alpha":a=r.Generate.ListAlpha(n).toLowerCase();break;case"upper-alpha":a=r.Generate.ListAlpha(n)}return a+". "}function A(e,t,n){var r,a,l,i=t.ctx,o=m(e,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(o)){if(a=z(e,o),l=O(e,a),T(i,e,"none",m(e,"color")),"inside"!==m(e,"listStylePosition"))return;i.setVariable("textAlign","left"),r=n.left,E(a,r,l.bottom,i)}}function U(e){var t=a[e];return t&&t.succeeded===!0?t.img:!1}function P(e,t){var n=Math.max(e.left,t.left),r=Math.max(e.top,t.top),a=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height);return{left:n,top:r,width:a-n,height:i-r}}function F(e,t,n){var r,a="static"!==t.cssPosition,i=a?m(e,"zIndex"):"auto",o=m(e,"opacity"),l="none"!==m(e,"cssFloat");t.zIndex=r=f(i),r.isPositioned=a,r.isFloated=l,r.opacity=o,r.ownStacking="auto"!==i||1>o,n&&n.zIndex.children.push(t)}function D(e,t,n,r,a){var i=x(t,"paddingLeft"),o=x(t,"paddingTop"),l=x(t,"paddingRight"),s=x(t,"paddingBottom");K(e,n,0,0,n.width,n.height,r.left+i+a[3].width,r.top+o+a[0].width,r.width-(a[1].width+a[3].width+i+l),r.height-(a[0].width+a[2].width+o+s))}function G(e){return["Top","Right","Bottom","Left"].map(function(t){return{width:x(e,"border"+t+"Width"),color:m(e,"border"+t+"Color")}})}function V(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){return m(e,"border"+t+"Radius")})}function W(e,t,n,r){var a=function(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}};return{start:e,startControl:t,endControl:n,end:r,subdivide:function(i){var o=a(e,t,i),l=a(t,n,i),s=a(n,r,i),c=a(o,l,i),d=a(l,s,i),u=a(c,d,i);return[W(e,o,c,u),W(u,d,s,r)]},curveTo:function(e){e.push(["bezierCurve",t.x,t.y,n.x,n.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",n.x,n.y,t.x,t.y,e.x,e.y])}}}function $(e,t,n,r,a,i,o){t[0]>0||t[1]>0?(e.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(e),r[1].curveTo(e)):e.push(["line",i,o]),(n[0]>0||n[1]>0)&&e.push(["line",a[0].start.x,a[0].start.y])}function _(e,t,n,r,a,i,o){var l=[];return t[0]>0||t[1]>0?(l.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(l)):l.push(["line",e.c1[0],e.c1[1]]),n[0]>0||n[1]>0?(l.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(l),l.push(["line",o[0].end.x,o[0].end.y]),o[0].curveToReversed(l)):(l.push(["line",e.c2[0],e.c2[1]]),l.push(["line",e.c3[0],e.c3[1]])),t[0]>0||t[1]>0?(l.push(["line",a[1].end.x,a[1].end.y]),a[1].curveToReversed(l)):l.push(["line",e.c4[0],e.c4[1]]),l}function j(e,t,n){var r=e.left,a=e.top,i=e.width,o=e.height,l=t[0][0],s=t[0][1],c=t[1][0],d=t[1][1],u=t[2][0],f=t[2][1],h=t[3][0],g=t[3][1],m=i-c,p=o-f,y=i-u,b=o-g;return{topLeftOuter:H(r,a,l,s).topLeft.subdivide(.5),topLeftInner:H(r+n[3].width,a+n[0].width,Math.max(0,l-n[3].width),Math.max(0,s-n[0].width)).topLeft.subdivide(.5),topRightOuter:H(r+m,a,c,d).topRight.subdivide(.5),topRightInner:H(r+Math.min(m,i+n[3].width),a+n[0].width,m>i+n[3].width?0:c-n[3].width,d-n[0].width).topRight.subdivide(.5),bottomRightOuter:H(r+y,a+p,u,f).bottomRight.subdivide(.5),bottomRightInner:H(r+Math.min(y,i+n[3].width),a+Math.min(p,o+n[0].width),Math.max(0,u-n[1].width),Math.max(0,f-n[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:H(r,a+b,h,g).bottomLeft.subdivide(.5),bottomLeftInner:H(r+n[3].width,a+b,Math.max(0,h-n[3].width),Math.max(0,g-n[2].width)).bottomLeft.subdivide(.5)}}function q(e,t,n,r,a){var i=m(e,"backgroundClip"),o=[];switch(i){case"content-box":case"padding-box":$(o,r[0],r[1],t.topLeftInner,t.topRightInner,a.left+n[3].width,a.top+n[0].width),$(o,r[1],r[2],t.topRightInner,t.bottomRightInner,a.left+a.width-n[1].width,a.top+n[0].width),$(o,r[2],r[3],t.bottomRightInner,t.bottomLeftInner,a.left+a.width-n[1].width,a.top+a.height-n[2].width),$(o,r[3],r[0],t.bottomLeftInner,t.topLeftInner,a.left+n[3].width,a.top+a.height-n[2].width);break;default:$(o,r[0],r[1],t.topLeftOuter,t.topRightOuter,a.left,a.top),$(o,r[1],r[2],t.topRightOuter,t.bottomRightOuter,a.left+a.width,a.top),$(o,r[2],r[3],t.bottomRightOuter,t.bottomLeftOuter,a.left+a.width,a.top+a.height),$(o,r[3],r[0],t.bottomLeftOuter,t.topLeftOuter,a.left,a.top+a.height)}return o}function X(e,t,n){var l,s,c,d,u,f,r=t.left,a=t.top,i=t.width,o=t.height,h=V(e),g=j(t,h,n),m={clip:q(e,g,n,h,t),borders:[]};for(l=0;4>l;l++)if(n[l].width>0){switch(s=r,c=a,d=i,u=o-n[2].width,l){case 0:u=n[0].width,f=_({c1:[s,c],c2:[s+d,c],c3:[s+d-n[1].width,c+u],c4:[s+n[3].width,c+u]},h[0],h[1],g.topLeftOuter,g.topLeftInner,g.topRightOuter,g.topRightInner);break;case 1:s=r+i-n[1].width,d=n[1].width,f=_({c1:[s+d,c],c2:[s+d,c+u+n[2].width],c3:[s,c+u],c4:[s,c+n[0].width]},h[1],h[2],g.topRightOuter,g.topRightInner,g.bottomRightOuter,g.bottomRightInner);break;case 2:c=c+o-n[2].width,u=n[2].width,f=_({c1:[s+d,c+u],c2:[s,c+u],c3:[s+n[3].width,c],c4:[s+d-n[3].width,c]},h[2],h[3],g.bottomRightOuter,g.bottomRightInner,g.bottomLeftOuter,g.bottomLeftInner);break;case 3:d=n[3].width,f=_({c1:[s,c+u+n[2].width],c2:[s,c],c3:[s+d,c+n[0].width],c4:[s+d,c+u]},h[3],h[0],g.bottomLeftOuter,g.bottomLeftInner,g.topLeftOuter,g.topLeftInner)}m.borders.push({args:f,color:n[l].color})}return m}function Y(e,t){var n=e.drawShape();return t.forEach(function(e,t){n[0===t?"moveTo":e[0]+"To"].apply(null,e.slice(1))}),n}function Q(e,t,n){"transparent"!==n&&(e.setVariable("fillStyle",n),Y(e,t),e.fill(),l+=1)}function J(e,t,n){var i,o,r=s.createElement("valuewrap"),a=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];a.forEach(function(t){try{r.style[t]=m(e,t)}catch(n){c.log("html2canvas: Parse: Exception caught in renderFormValue: "+n.message)}}),r.style.borderColor="black",r.style.borderStyle="solid",r.style.display="block",r.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(e.type)||"SELECT"===e.nodeName)&&(r.style.lineHeight=m(e,"height")),r.style.top=t.top+"px",r.style.left=t.left+"px",i="SELECT"===e.nodeName?(e.options[e.selectedIndex]||0).text:e.value,i||(i=e.placeholder),o=s.createTextNode(i),r.appendChild(o),g.appendChild(r),L(e,o,n),g.removeChild(r)}function K(e){e.drawImage.apply(e,Array.prototype.slice.call(arguments,1)),l+=1}function Z(n,r){var a=e.getComputedStyle(n,r);if(a&&a.content&&"none"!==a.content&&"-moz-alt-content"!==a.content&&"none"!==a.display){var i=a.content+"",o=i.substr(0,1);o===i.substr(i.length-1)&&o.match(/'|"/)&&(i=i.substr(1,i.length-2));var l="url"===i.substr(0,3),s=t.createElement(l?"img":"span");return s.className=p+"-before "+p+"-after",Object.keys(a).filter(et).forEach(function(e){try{s.style[e]=a[e]}catch(t){c.log(["Tried to assign readonly property ",e,"Error:",t])}}),l?s.src=c.parseBackgroundImage(i)[0].args[0]:s.innerHTML=i,s}}function et(t){return isNaN(e.parseInt(t,10))}function tt(e,t){var n=Z(e,":before"),r=Z(e,":after");(n||r)&&(n&&(e.className+=" "+p+"-before",e.parentNode.insertBefore(n,e),yt(n,t,!0),e.parentNode.removeChild(n),e.className=e.className.replace(p+"-before","").trim()),r&&(e.className+=" "+p+"-after",e.appendChild(r),yt(r,t,!0),e.removeChild(r),e.className=e.className.replace(p+"-after","").trim()))}function nt(e,t,n,r){var a=Math.round(r.left+n.left),i=Math.round(r.top+n.top);e.createPattern(t),e.translate(a,i),e.fill(),e.translate(-a,-i)}function rt(e,t,n,r,a,i,o,l){var s=[];s.push(["line",Math.round(a),Math.round(i)]),s.push(["line",Math.round(a+o),Math.round(i)]),s.push(["line",Math.round(a+o),Math.round(l+i)]),s.push(["line",Math.round(a),Math.round(l+i)]),Y(e,s),e.save(),e.clip(),nt(e,t,n,r),e.restore()}function at(e,t,n){w(e,t.left,t.top,t.width,t.height,n)}function it(e,t,n,r,a){var i=c.BackgroundSize(e,t,r,a),o=c.BackgroundPosition(e,t,r,a,i),l=m(e,"backgroundRepeat").split(",").map(c.trimText);switch(r=lt(r,i),l=l[a]||l[0]){case"repeat-x":rt(n,r,o,t,t.left,t.top+o.top,99999,r.height);break;case"repeat-y":rt(n,r,o,t,t.left+o.left,t.top,r.width,99999);break;case"no-repeat":rt(n,r,o,t,t.left+o.left,t.top+o.top,r.width,r.height);break;default:nt(n,r,o,{top:t.top,left:t.left,width:r.width,height:r.height})}}function ot(e,t,n){for(var i,r=m(e,"backgroundImage"),a=c.parseBackgroundImage(r),o=a.length;o--;)if(r=a[o],r.args&&0!==r.args.length){var l="url"===r.method?r.args[0]:r.value;i=U(l),i?it(e,t,n,i,o):c.log("html2canvas: Error loading background:",r)}}function lt(e,t){if(e.width===t.width&&e.height===t.height)return e;var n,r=s.createElement("canvas");return r.width=t.width,r.height=t.height,n=r.getContext("2d"),K(n,e,0,0,e.width,e.height,0,0,t.width,t.height),r}function st(e,t,n){return e.setVariable("globalAlpha",m(t,"opacity")*(n?n.opacity:1))}function ct(e){return e.replace("px","")}function ut(e){var n=m(e,"transform")||m(e,"-webkit-transform")||m(e,"-moz-transform")||m(e,"-ms-transform")||m(e,"-o-transform"),r=m(e,"transform-origin")||m(e,"-webkit-transform-origin")||m(e,"-moz-transform-origin")||m(e,"-ms-transform-origin")||m(e,"-o-transform-origin")||"0px 0px";
r=r.split(" ").map(ct).map(c.asFloat);var a;if(n&&"none"!==n){var i=n.match(dt);if(i)switch(i[1]){case"matrix":a=i[2].split(",").map(c.trimText).map(c.asFloat)}}return{origin:r,matrix:a}}function ft(e,t,n,r){var a=u(t?n.width:b(),t?n.height:v()),o={ctx:a,opacity:st(a,e,t),cssPosition:m(e,"position"),borders:G(e),transform:r,clip:t&&t.clip?c.Extend({},t.clip):null};return F(e,o,t),i.useOverflow===!0&&/(hidden|scroll|auto)/.test(m(e,"overflow"))===!0&&/(BODY)/i.test(e.nodeName)===!1&&(o.clip=o.clip?P(o.clip,n):n),o}function ht(e,t,n){var r={left:t.left+e[3].width,top:t.top+e[0].width,width:t.width-(e[1].width+e[3].width),height:t.height-(e[0].width+e[2].width)};return n&&(r=P(r,n)),r}function gt(e,t){var n=t.matrix?c.OffsetBounds(e):c.Bounds(e);return t.origin[0]+=n.left,t.origin[1]+=n.top,n}function mt(e,t,n,r){var o,a=ut(e,t),i=gt(e,a),l=ft(e,t,i,a),s=l.borders,d=l.ctx,u=ht(s,i,l.clip),f=X(e,i,s),g=h.test(e.nodeName)?"#efefef":m(e,"backgroundColor");switch(Y(d,f.clip),d.save(),d.clip(),u.height>0&&u.width>0&&!r?(at(d,i,g),ot(e,u,d)):r&&(l.backgroundColor=g),d.restore(),f.borders.forEach(function(e){Q(d,e.args,e.color)}),n||tt(e,l),e.nodeName){case"IMG":(o=U(e.getAttribute("src")))?D(d,e,o,i,s):c.log("html2canvas: Error loading <img>:"+e.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(e.type)&&(e.value||e.placeholder||"").length>0&&J(e,i,l);break;case"TEXTAREA":(e.value||e.placeholder||"").length>0&&J(e,i,l);break;case"SELECT":(e.options||e.placeholder||"").length>0&&J(e,i,l);break;case"LI":A(e,l,u);break;case"CANVAS":D(d,e,e,i,s)}return l}function pt(e){return"none"!==m(e,"display")&&"hidden"!==m(e,"visibility")&&!e.hasAttribute("data-html2canvas-ignore")}function yt(e,t,n){pt(e)&&(t=mt(e,t,n,!1)||t,h.test(e.nodeName)||bt(e,t,n))}function bt(e,t,n){c.Children(e).forEach(function(r){r.nodeType===r.ELEMENT_NODE?yt(r,t,n):r.nodeType===r.TEXT_NODE&&L(e,r,t)})}function vt(){var e=m(t.documentElement,"backgroundColor"),n=c.isTransparent(e)&&o===t.body,r=mt(o,null,!1,n);return bt(o,r),n&&(e=r.backgroundColor),g.removeChild(y),{backgroundColor:e,stack:r}}e.scroll(0,0);var o=i.elements===n?t.body:i.elements[0],l=0,s=o.ownerDocument,c=r.Util,d=c.Support(i,s),h=new RegExp("("+i.ignoreElements+")"),g=s.body,m=c.getCSS,p="___html2canvas___pseudoelement",y=s.createElement("style");y.innerHTML="."+p+'-before:before { content: "" !important; display: none !important; }.'+p+'-after:after { content: "" !important; display: none !important; }',g.appendChild(y),a=a||{};var H=function(e){return function(t,n,r,a){var i=r*e,o=a*e,l=t+r,s=n+a;return{topLeft:W({x:t,y:s},{x:t,y:s-o},{x:l-i,y:n},{x:l,y:n}),topRight:W({x:t,y:n},{x:t+i,y:n},{x:l,y:s-o},{x:l,y:s}),bottomRight:W({x:l,y:n},{x:l,y:n+o},{x:t+i,y:s},{x:t,y:s}),bottomLeft:W({x:l,y:s},{x:l-i,y:s},{x:t,y:n+o},{x:t,y:n})}}}(4*((Math.sqrt(2)-1)/3)),dt=/(matrix)\((.+)\)/;return vt()},r.Preload=function(a){function b(e){m.href=e,m.href=m.href;var t=m.protocol+m.host;return t===o}function v(){l.log("html2canvas: start: images: "+i.numLoaded+" / "+i.numTotal+" (failed: "+i.numFailed+")"),!i.firstRun&&i.numLoaded>=i.numTotal&&(l.log("Finished loading images: # "+i.numTotal+" (failed: "+i.numFailed+")"),"function"==typeof a.complete&&a.complete(i))}function x(t,r,o){var l,c,s=a.proxy;m.href=t,t=m.href,l="html2canvas_"+d++,o.callbackname=l,s+=s.indexOf("?")>-1?"&":"?",s+="url="+encodeURIComponent(t)+"&callback="+l,c=f.createElement("script"),e[l]=function(t){"error:"===t.substring(0,6)?(o.succeeded=!1,i.numLoaded++,i.numFailed++,v()):(B(r,o),r.src=t),e[l]=n;try{delete e[l]}catch(a){}c.parentNode.removeChild(c),c=null,delete o.script,delete o.callbackname},c.setAttribute("type","text/javascript"),c.setAttribute("src",s),o.script=c,e.document.body.appendChild(c)}function w(t,n){var a=e.getComputedStyle(t,n),i=a.content;"url"===i.substr(0,3)&&s.loadImage(r.Util.parseBackgroundImage(i)[0].args[0]),E(a.backgroundImage,t)}function C(e){w(e,":before"),w(e,":after")}function k(e,t){var a=r.Generate.Gradient(e,t);a!==n&&(i[e]={img:a,succeeded:!0},i.numTotal++,i.numLoaded++,v())}function I(e){return e&&e.method&&e.args&&e.args.length>0}function E(e,t){var a;r.Util.parseBackgroundImage(e).filter(I).forEach(function(e){"url"===e.method?s.loadImage(e.args[0]):e.method.match(/\-?gradient$/)&&(a===n&&(a=r.Util.Bounds(t)),k(e.value,a))})}function T(e){var t=!1;try{l.Children(e).forEach(T)}catch(r){}try{t=e.nodeType}catch(a){t=!1,l.log("html2canvas: failed to access some element's nodeType - Exception: "+a.message)}if(1===t||t===n){C(e);try{E(l.getCSS(e,"backgroundImage"),e)}catch(r){l.log("html2canvas: failed to get background-image - Exception: "+r.message)}E(e)}}function B(t,r){t.onload=function(){r.timer!==n&&e.clearTimeout(r.timer),i.numLoaded++,r.succeeded=!0,t.onerror=t.onload=null,v()},t.onerror=function(){if("anonymous"===t.crossOrigin&&(e.clearTimeout(r.timer),a.proxy)){var n=t.src;return t=new Image,r.img=t,t.src=n,void x(t.src,t,r)}i.numLoaded++,i.numFailed++,r.succeeded=!1,t.onerror=t.onload=null,v()}}var o,s,c,y,i={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},l=r.Util,d=0,u=a.elements[0]||t.body,f=u.ownerDocument,h=u.getElementsByTagName("img"),g=h.length,m=f.createElement("a"),p=function(e){return e.crossOrigin!==n}(new Image);for(m.href=e.location.href,o=m.protocol+m.host,s={loadImage:function(e){var t,r;e&&i[e]===n&&(t=new Image,e.match(/data:image\/.*;base64,/i)?(t.src=e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),r=i[e]={img:t},i.numTotal++,B(t,r)):b(e)||a.allowTaint===!0?(r=i[e]={img:t},i.numTotal++,B(t,r),t.src=e):p&&!a.allowTaint&&a.useCORS?(t.crossOrigin="anonymous",r=i[e]={img:t},i.numTotal++,B(t,r),t.src=e):a.proxy&&(r=i[e]={img:t},i.numTotal++,x(e,t,r)))},cleanupDOM:function(r){var o,s;if(!i.cleanupDone){l.log(r&&"string"==typeof r?"html2canvas: Cleanup because: "+r:"html2canvas: Cleanup after timeout: "+a.timeout+" ms.");for(s in i)if(i.hasOwnProperty(s)&&(o=i[s],"object"==typeof o&&o.callbackname&&o.succeeded===n)){e[o.callbackname]=n;try{delete e[o.callbackname]}catch(c){}o.script&&o.script.parentNode&&(o.script.setAttribute("src","about:blank"),o.script.parentNode.removeChild(o.script)),i.numLoaded++,i.numFailed++,l.log("html2canvas: Cleaned up failed img: '"+s+"' Steps: "+i.numLoaded+" / "+i.numTotal)}e.stop!==n?e.stop():t.execCommand!==n&&t.execCommand("Stop",!1),t.close!==n&&t.close(),i.cleanupDone=!0,r&&"string"==typeof r||v()}},renderingDone:function(){y&&e.clearTimeout(y)}},a.timeout>0&&(y=e.setTimeout(s.cleanupDOM,a.timeout)),l.log("html2canvas: Preload starts: finding background-images"),i.firstRun=!0,T(u),l.log("html2canvas: Preload: Finding images"),c=0;g>c;c+=1)s.loadImage(h[c].getAttribute("src"));return i.firstRun=!1,l.log("html2canvas: Preload: Done."),i.numTotal===i.numLoaded&&v(),s},r.Renderer=function(e,a){function i(e){function a(e){Object.keys(e).sort().forEach(function(n){var r=[],i=[],o=[],l=[];e[n].forEach(function(e){e.node.zIndex.isPositioned||e.node.zIndex.opacity<1?o.push(e):e.node.zIndex.isFloated?i.push(e):r.push(e)}),function s(e){e.forEach(function(e){l.push(e),e.children&&s(e.children)})}(r.concat(i,o)),l.forEach(function(e){e.context?a(e.context):t.push(e.node)})})}var r,t=[];return r=function(e){function r(e,t,a){var i="auto"===t.zIndex.zindex?0:Number(t.zIndex.zindex),o=e,l=t.zIndex.isPositioned,s=t.zIndex.isFloated,c={node:t},d=a;t.zIndex.ownStacking?(o=c.context={"!":[{node:t,children:[]}]},d=n):(l||s)&&(d=c.children=[]),0===i&&a?a.push(c):(e[i]||(e[i]=[]),e[i].push(c)),t.zIndex.children.forEach(function(e){r(o,e,d)})}var t={};return r(t,e),t}(e),a(r),t}function o(e){var t;if("string"==typeof a.renderer&&r.Renderer[e]!==n)t=r.Renderer[e](a);else{if("function"!=typeof e)throw new Error("Unknown renderer");t=e(a)}if("function"!=typeof t)throw new Error("Invalid renderer defined");return t}return o(a.renderer)(e,a,t,i(e.stack),r)},r.Util.Support=function(e,t){function a(){var e=new Image,a=t.createElement("canvas"),i=a.getContext===n?!1:a.getContext("2d");if(i===!1)return!1;a.width=a.height=10,e.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{i.drawImage(e,0,0),a.toDataURL()}catch(o){return!1}return r.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function i(){var e,n,r,a,i=!1;return t.createRange&&(e=t.createRange(),e.getBoundingClientRect&&(n=t.createElement("boundtest"),n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n),r=e.getBoundingClientRect(),a=r.height,123===a&&(i=!0),t.body.removeChild(n))),i}return{rangeBounds:i(),svgRendering:e.svgRendering&&a()}},e.html2canvas=function(t,n){t=t.length?t:[t];var a,i,o={logging:!1,elements:t,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return o=r.Util.Extend(n,o),r.logging=o.logging,o.complete=function(e){("function"!=typeof o.onpreloaded||o.onpreloaded(e)!==!1)&&(a=r.Parse(e,o),("function"!=typeof o.onparsed||o.onparsed(a)!==!1)&&(i=r.Renderer(a,o),"function"==typeof o.onrendered&&o.onrendered(i)))},e.setTimeout(function(){r.Preload(o)},0),{render:function(e,t){return r.Renderer(e,r.Util.Extend(t,o))},parse:function(e,t){return r.Parse(e,r.Util.Extend(t,o))},preload:function(e){return r.Preload(r.Util.Extend(e,o))},log:r.Util.log}},e.html2canvas.log=r.Util.log,e.html2canvas.Renderer={Canvas:n},r.Renderer.Canvas=function(e){function d(e,t){e.beginPath(),t.forEach(function(t){e[t.name].apply(e,t.arguments)}),e.closePath()}function u(e){if(-1===i.indexOf(e.arguments[0].src)){l.drawImage(e.arguments[0],0,0);try{l.getImageData(0,0,1,1)}catch(t){return o=a.createElement("canvas"),l=o.getContext("2d"),!1}i.push(e.arguments[0].src)}return!0}function f(t,n){switch(n.type){case"variable":t[n.name]=n.arguments;break;case"function":switch(n.name){case"createPattern":if(n.arguments[0].width>0&&n.arguments[0].height>0)try{t.fillStyle=t.createPattern(n.arguments[0],"repeat")}catch(r){s.log("html2canvas: Renderer: Error creating pattern",r.message)}break;case"drawShape":d(t,n.arguments);break;case"drawImage":n.arguments[8]>0&&n.arguments[7]>0&&(!e.taintTest||e.taintTest&&u(n))&&t.drawImage.apply(t,n.arguments);break;default:t[n.name].apply(t,n.arguments)}}}e=e||{};var a=t,i=[],o=t.createElement("canvas"),l=o.getContext("2d"),s=r.Util,c=e.canvas||a.createElement("canvas");return function(e,t,r,a,i){var l,d,u,o=c.getContext("2d"),h=e.stack;return c.width=c.style.width=t.width||h.ctx.width,c.height=c.style.height=t.height||h.ctx.height,u=o.fillStyle,o.fillStyle=s.isTransparent(h.backgroundColor)&&t.background!==n?t.background:e.backgroundColor,o.fillRect(0,0,c.width,c.height),o.fillStyle=u,a.forEach(function(e){o.textBaseline="bottom",o.save(),e.transform.matrix&&(o.translate(e.transform.origin[0],e.transform.origin[1]),o.transform.apply(o,e.transform.matrix),o.translate(-e.transform.origin[0],-e.transform.origin[1])),e.clip&&(o.beginPath(),o.rect(e.clip.left,e.clip.top,e.clip.width,e.clip.height),o.clip()),e.ctx.storage&&e.ctx.storage.forEach(function(e){f(o,e)}),o.restore()}),s.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===t.elements.length&&"object"==typeof t.elements[0]&&"BODY"!==t.elements[0].nodeName?(d=i.Util.Bounds(t.elements[0]),l=r.createElement("canvas"),l.width=Math.ceil(d.width),l.height=Math.ceil(d.height),o=l.getContext("2d"),o.drawImage(c,d.left,d.top,d.width,d.height,0,0,d.width,d.height),c=null,l):c}}}(window,document);
/*
Use html2canvas - http://html2canvas.hertzen.com
    StackBlur - http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html
    IntegralImageBlur - http://www.quasimondo.com/IntegralImageForCanvas/IntegralImageBlurDemo.html
*/